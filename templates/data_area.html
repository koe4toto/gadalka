{% extends 'layout.html' %}

{% block body %}
<a class="text-secondary" href="/data_areas">Предметные области</a><br>
&#8595;

<div class="row">
  <div class="col-10">
      <h1>{{ data_area[1] }}</h1>
  </div>

<div class="col-2">
  <form action="{{url_for('data_areas.delete_data_area', id=data_area[0])}}" method="post">
      <input type="hidden" name="_method" value="DELETE">
      <input type="submit" value=" Удалить" class="btn btn-link float-right text-danger">
  </form>
</div>
</div>

<p  class="lead">{{ data_area[2] }}</p>

<a class="btn btn-outline-secondary " href="/edit_data_area/{{ data_area[0] }}">
    <i class="fas fa-pencil-alt"></i> Редактировать
</a>

<hr>

{% if measures == []%}
<div class="alert alert-success" role="alert">
  <h4 class="alert-heading">Отлично!</h4>
    <br>
  <p>1. Для начала укажите с какими параметрами мы будем работать</p>
  <hr>
  <p class="mb-0">2. После можно загрузить данные из файла в формате XLCX</p>
    <hr>
  <p class="mb-0">3. Дождаться обработки и начать работу с результатами</p>
</div>
{% else %}
<a class="btn btn-outline-secondary" href="/upload_data_area_from_file/{{ data_area[0] }}">
        <i class="fas fa-cloud-upload-alt"></i> Загрузить данные из файла
    </a>
{% endif %}

<a class="btn dropdown-toggle btn-secondary"   href="#" id="navbarDropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
Добавить параметр
</a>
<div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
    <a class="dropdown-item" href="/data_area/{{ data_area[0] }}/add_measure_type_1" title="Данные выраженные в числах">Количественные данные</a>
    <a class="dropdown-item" href="/data_area/{{ data_area[0] }}/add_measure_type_2" title="Данные в текстовом виде">Качественные  данные</a>
    <a class="dropdown-item" href="/data_area/{{ data_area[0] }}/add_measure_type_3" title="Данные по справочнику">Данные по справочнику</a>
    <a class="dropdown-item" href="/data_area/{{ data_area[0] }}/add_measure_type_4" title="Данные в формате часы:мунуты:секунды">Время</a>
    <a class="dropdown-item" href="/data_area/{{ data_area[0] }}/add_measure_type_5" title="Данные в формате день.месяц.год">Дата</a>
    <a class="dropdown-item" href="/data_area/{{ data_area[0] }}/add_measure_type_6" title="Данные в формате день.месяц.год часы:мунуты:секунды">Время и дата</a>
</div>
<br><br>
  {% if data_area[4] == '2' %}
    <div class="alert alert-secondary" role="alert">
      Ожидает обработки
    </div>
    {% elif data_area[4] == '3' %}
    <div class="alert alert-warning" role="alert">
      Обрабатывается
    </div>
    {% elif data_area[4] == '4' %}
    <div class="alert alert-danger" role="alert">
      Данных не достаточно для анализа
    </div>
    {% elif data_area[4] == '5' %}
    <div class="alert alert-warning" role="alert">
      Поиск связей
    </div>
    {% elif data_area[4] == '6' %}
    <div class="alert alert-success" role="alert">
      Обработано
    </div>
  {% endif %}
<br>
<br>

<table class="table">
  <tbody>
  {% for i in measures %}
    <tr>
        <td>
            <b><a href="measure/{{ i[0] }}/">{{ i[2] }}</a></b><br>{{ i[1] }}
        </td>
        <td>
            {{ i[3] }}
        </td>
        <td>
            <a class="btn btn-outline-secondary right" href="/data_area/{{data_area[0]}}/edit_measure_{{ i[0] }}">
                <i class="fas fa-pencil-alt"></i> Редактировать
            </a>
        </td>
        <td>
            <form action="{{url_for('measures.delete_data_measure', id=i[0], data_area_id=data_area[0])}}" method="post">
              <input type="hidden" name="_method" value="DELETE">
              <input type="submit" value=" Удалить" class="btn btn-link float-right text-danger">
            </form>
        </td>
    </tr>
  {% endfor %}
  </tbody>
</table>



{% endblock %}
